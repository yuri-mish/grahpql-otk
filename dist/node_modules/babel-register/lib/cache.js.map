{"version":3,"sources":["../../../../node_modules/babel-register/lib/cache.js"],"names":["exports","__esModule","_stringify","require","_stringify2","_interopRequireDefault","save","load","get","_path","_path2","_fs","_fs2","_mkdirp","_homeOrTmp","_homeOrTmp2","obj","default","FILENAME","process","env","BABEL_CACHE_PATH","join","data","serialised","err","message","console","error","stack","sync","dirname","writeFileSync","BABEL_DISABLE_CACHE","on","nextTick","existsSync","JSON","parse","readFileSync"],"mappings":"AAAA;;AAEAA,QAAQC,UAAR,GAAqB,IAArB;;AAEA,IAAIC,aAAaC,QAAQ,sCAAR,CAAjB;;AAEA,IAAIC,cAAcC,uBAAuBH,UAAvB,CAAlB;;AAEAF,QAAQM,IAAR,GAAeA,IAAf;AACAN,QAAQO,IAAR,GAAeA,IAAf;AACAP,QAAQQ,GAAR,GAAcA,GAAd;;AAEA,IAAIC,QAAQN,QAAQ,MAAR,CAAZ;;AAEA,IAAIO,SAASL,uBAAuBI,KAAvB,CAAb;;AAEA,IAAIE,MAAMR,QAAQ,IAAR,CAAV;;AAEA,IAAIS,OAAOP,uBAAuBM,GAAvB,CAAX;;AAEA,IAAIE,UAAUV,QAAQ,QAAR,CAAd;;AAEA,IAAIW,aAAaX,QAAQ,aAAR,CAAjB;;AAEA,IAAIY,cAAcV,uBAAuBS,UAAvB,CAAlB;;AAEA,SAAST,sBAAT,CAAgCW,GAAhC,EAAqC;AAAE,SAAOA,OAAOA,IAAIf,UAAX,GAAwBe,GAAxB,GAA8B,EAAEC,SAASD,GAAX,EAArC;AAAwD;;AAE/F,IAAIE,WAAWC,QAAQC,GAAR,CAAYC,gBAAZ,IAAgCX,OAAOO,OAAP,CAAeK,IAAf,CAAoBP,YAAYE,OAAhC,EAAyC,aAAzC,CAA/C;AACA,IAAIM,OAAO,EAAX;;AAEA,SAASjB,IAAT,GAAgB;AACd,MAAIkB,aAAa,IAAjB;;AAEA,MAAI;AACFA,iBAAa,CAAC,GAAGpB,YAAYa,OAAhB,EAAyBM,IAAzB,EAA+B,IAA/B,EAAqC,IAArC,CAAb;AACD,GAFD,CAEE,OAAOE,GAAP,EAAY;;AAEZ,QAAIA,IAAIC,OAAJ,KAAgB,uBAApB,EAA6C;AAC3CD,UAAIC,OAAJ,GAAc,uCAAd;AACAC,cAAQC,KAAR,CAAcH,IAAII,KAAlB;AACD,KAHD,MAGO;AACL,YAAMJ,GAAN;AACD;AACF;;AAED,GAAC,GAAGZ,QAAQiB,IAAZ,EAAkBpB,OAAOO,OAAP,CAAec,OAAf,CAAuBb,QAAvB,CAAlB;AACAN,OAAKK,OAAL,CAAae,aAAb,CAA2Bd,QAA3B,EAAqCM,UAArC;AACD;;AAED,SAASjB,IAAT,GAAgB;AACd,MAAIY,QAAQC,GAAR,CAAYa,mBAAhB,EAAqC;;AAErCd,UAAQe,EAAR,CAAW,MAAX,EAAmB5B,IAAnB;AACAa,UAAQgB,QAAR,CAAiB7B,IAAjB;;AAEA,MAAI,CAACM,KAAKK,OAAL,CAAamB,UAAb,CAAwBlB,QAAxB,CAAL,EAAwC;;AAExC,MAAI;AACFK,WAAOc,KAAKC,KAAL,CAAW1B,KAAKK,OAAL,CAAasB,YAAb,CAA0BrB,QAA1B,CAAX,CAAP;AACD,GAFD,CAEE,OAAOO,GAAP,EAAY;AACZ;AACD;AACF;;AAED,SAASjB,GAAT,GAAe;AACb,SAAOe,IAAP;AACD","file":"cache.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _stringify = require(\"babel-runtime/core-js/json/stringify\");\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nexports.save = save;\nexports.load = load;\nexports.get = get;\n\nvar _path = require(\"path\");\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _fs = require(\"fs\");\n\nvar _fs2 = _interopRequireDefault(_fs);\n\nvar _mkdirp = require(\"mkdirp\");\n\nvar _homeOrTmp = require(\"home-or-tmp\");\n\nvar _homeOrTmp2 = _interopRequireDefault(_homeOrTmp);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar FILENAME = process.env.BABEL_CACHE_PATH || _path2.default.join(_homeOrTmp2.default, \".babel.json\");\nvar data = {};\n\nfunction save() {\n  var serialised = \"{}\";\n\n  try {\n    serialised = (0, _stringify2.default)(data, null, \"  \");\n  } catch (err) {\n\n    if (err.message === \"Invalid string length\") {\n      err.message = \"Cache too large so it's been cleared.\";\n      console.error(err.stack);\n    } else {\n      throw err;\n    }\n  }\n\n  (0, _mkdirp.sync)(_path2.default.dirname(FILENAME));\n  _fs2.default.writeFileSync(FILENAME, serialised);\n}\n\nfunction load() {\n  if (process.env.BABEL_DISABLE_CACHE) return;\n\n  process.on(\"exit\", save);\n  process.nextTick(save);\n\n  if (!_fs2.default.existsSync(FILENAME)) return;\n\n  try {\n    data = JSON.parse(_fs2.default.readFileSync(FILENAME));\n  } catch (err) {\n    return;\n  }\n}\n\nfunction get() {\n  return data;\n}"]}