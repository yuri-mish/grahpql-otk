{"version":3,"sources":["../../../../../node_modules/babel-cli/lib/babel/util.js"],"names":["exports","__esModule","chmod","readdirFilter","shouldIgnore","addSourceMappingUrl","log","transform","compile","requireChokidar","commander","require","defaults","readdir","index","babel","util","path","fs","src","dest","chmodSync","statSync","mode","filename","filter","canCompile","loc","opts","ignore","only","code","basename","msg","quiet","console","result","actual","readFileSync","err","watch","error","toErrorStack","ignored","_babel","SyntaxError","name","message","codeFrame","stack","process","on","exit"],"mappings":"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","file":"util.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports.chmod = chmod;\nexports.readdirFilter = readdirFilter;\nexports.shouldIgnore = shouldIgnore;\nexports.addSourceMappingUrl = addSourceMappingUrl;\nexports.log = log;\nexports.transform = transform;\nexports.compile = compile;\nexports.requireChokidar = requireChokidar;\nvar commander = require(\"commander\");\nvar defaults = require(\"lodash/defaults\");\nvar readdir = require(\"fs-readdir-recursive\");\nvar index = require(\"./index\");\nvar babel = require(\"babel-core\");\nvar util = require(\"babel-core\").util;\nvar path = require(\"path\");\nvar fs = require(\"fs\");\n\nfunction chmod(src, dest) {\n  fs.chmodSync(dest, fs.statSync(src).mode);\n}\n\nfunction readdirFilter(filename) {\n  return readdir(filename).filter(function (filename) {\n    return util.canCompile(filename);\n  });\n}\n\nexports.readdir = readdir;\nvar canCompile = exports.canCompile = util.canCompile;\n\nfunction shouldIgnore(loc) {\n  return util.shouldIgnore(loc, index.opts.ignore, index.opts.only);\n}\n\nfunction addSourceMappingUrl(code, loc) {\n  return code + \"\\n//# sourceMappingURL=\" + path.basename(loc);\n}\n\nfunction log(msg) {\n  if (!commander.quiet) console.log(msg);\n}\n\nfunction transform(filename, code, opts) {\n  opts = defaults(opts || {}, index.opts);\n  opts.filename = filename;\n\n  var result = babel.transform(code, opts);\n  result.filename = filename;\n  result.actual = code;\n  return result;\n}\n\nfunction compile(filename, opts) {\n  try {\n    var code = fs.readFileSync(filename, \"utf8\");\n    return transform(filename, code, opts);\n  } catch (err) {\n    if (commander.watch) {\n      console.error(toErrorStack(err));\n      return { ignored: true };\n    } else {\n      throw err;\n    }\n  }\n}\n\nfunction toErrorStack(err) {\n  if (err._babel && err instanceof SyntaxError) {\n    return err.name + \": \" + err.message + \"\\n\" + err.codeFrame;\n  } else {\n    return err.stack;\n  }\n}\n\nprocess.on(\"uncaughtException\", function (err) {\n  console.error(toErrorStack(err));\n  process.exit(1);\n});\n\nfunction requireChokidar() {\n  try {\n    return require(\"chokidar\");\n  } catch (err) {\n    console.error(\"The optional dependency chokidar failed to install and is required for \" + \"--watch. Chokidar is likely not supported on your platform.\");\n    throw err;\n  }\n}"]}