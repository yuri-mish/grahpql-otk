{"version":3,"sources":["../../../../node_modules/babel-cli/lib/_babel-node.js"],"names":["_pathIsAbsolute","require","_pathIsAbsolute2","_interopRequireDefault","_commander","_commander2","_module2","_module3","_util","_path","_path2","_repl","_repl2","_babelCore","babel","_interopRequireWildcard","_vm","_vm2","_babelRegister","_babelRegister2","obj","__esModule","newObj","key","Object","prototype","hasOwnProperty","call","default","program","Command","option","util","list","pkg","version","usage","parse","process","argv","extensions","ignore","only","plugins","presets","replPlugin","_ref","t","types","visitor","ModuleDeclaration","path","buildCodeFrameError","VariableDeclaration","node","kind","Program","get","some","child","isExpressionStatement","pushContainer","expressionStatement","identifier","_eval","code","filename","trim","undefined","transform","concat","runInThisContext","eval","print","global","__filename","__dirname","cwd","_module","paths","_nodeModulePaths","exports","module","bind","result","output","inspect","stdout","write","args","length","slice","i","ignoreNext","arg","i2","parsedArg","join","execArgv","unshift","runMain","replStart","start","prompt","input","stdin","replEval","useGlobal","context","callback","err","e"],"mappings":"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","file":"_babel-node.js","sourcesContent":["\"use strict\";\n\nvar _pathIsAbsolute = require(\"path-is-absolute\");\n\nvar _pathIsAbsolute2 = _interopRequireDefault(_pathIsAbsolute);\n\nvar _commander = require(\"commander\");\n\nvar _commander2 = _interopRequireDefault(_commander);\n\nvar _module2 = require(\"module\");\n\nvar _module3 = _interopRequireDefault(_module2);\n\nvar _util = require(\"util\");\n\nvar _path = require(\"path\");\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _repl = require(\"repl\");\n\nvar _repl2 = _interopRequireDefault(_repl);\n\nvar _babelCore = require(\"babel-core\");\n\nvar babel = _interopRequireWildcard(_babelCore);\n\nvar _vm = require(\"vm\");\n\nvar _vm2 = _interopRequireDefault(_vm);\n\nrequire(\"babel-polyfill\");\n\nvar _babelRegister = require(\"babel-register\");\n\nvar _babelRegister2 = _interopRequireDefault(_babelRegister);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar program = new _commander2.default.Command(\"babel-node\");\n\nprogram.option(\"-e, --eval [script]\", \"Evaluate script\");\nprogram.option(\"-p, --print [code]\", \"Evaluate script and print result\");\nprogram.option(\"-o, --only [globs]\", \"\");\nprogram.option(\"-i, --ignore [globs]\", \"\");\nprogram.option(\"-x, --extensions [extensions]\", \"List of extensions to hook into [.es6,.js,.es,.jsx]\");\nprogram.option(\"-w, --plugins [string]\", \"\", _babelCore.util.list);\nprogram.option(\"-b, --presets [string]\", \"\", _babelCore.util.list);\n\nvar pkg = require(\"../package.json\");\nprogram.version(pkg.version);\nprogram.usage(\"[options] [ -e script | script.js ] [arguments]\");\nprogram.parse(process.argv);\n\n(0, _babelRegister2.default)({\n  extensions: program.extensions,\n  ignore: program.ignore,\n  only: program.only,\n  plugins: program.plugins,\n  presets: program.presets\n});\n\nvar replPlugin = function replPlugin(_ref) {\n  var t = _ref.types;\n  return {\n    visitor: {\n      ModuleDeclaration: function ModuleDeclaration(path) {\n        throw path.buildCodeFrameError(\"Modules aren't supported in the REPL\");\n      },\n      VariableDeclaration: function VariableDeclaration(path) {\n        if (path.node.kind !== \"var\") {\n          throw path.buildCodeFrameError(\"Only `var` variables are supported in the REPL\");\n        }\n      },\n      Program: function Program(path) {\n        if (path.get(\"body\").some(function (child) {\n          return child.isExpressionStatement();\n        })) return;\n\n        path.pushContainer(\"body\", t.expressionStatement(t.identifier(\"undefined\")));\n      }\n    }\n  };\n};\n\nvar _eval = function _eval(code, filename) {\n  code = code.trim();\n  if (!code) return undefined;\n\n  code = babel.transform(code, {\n    filename: filename,\n    presets: program.presets,\n    plugins: (program.plugins || []).concat([replPlugin])\n  }).code;\n\n  return _vm2.default.runInThisContext(code, {\n    filename: filename\n  });\n};\n\nif (program.eval || program.print) {\n  var code = program.eval;\n  if (!code || code === true) code = program.print;\n\n  global.__filename = \"[eval]\";\n  global.__dirname = process.cwd();\n\n  var _module = new _module3.default(global.__filename);\n  _module.filename = global.__filename;\n  _module.paths = _module3.default._nodeModulePaths(global.__dirname);\n\n  global.exports = _module.exports;\n  global.module = _module;\n  global.require = _module.require.bind(_module);\n\n  var result = _eval(code, global.__filename);\n  if (program.print) {\n    var output = typeof result === \"string\" ? result : (0, _util.inspect)(result);\n    process.stdout.write(output + \"\\n\");\n  }\n} else {\n  if (program.args.length) {\n    var args = process.argv.slice(2);\n\n    var i = 0;\n    var ignoreNext = false;\n    args.some(function (arg, i2) {\n      if (ignoreNext) {\n        ignoreNext = false;\n        return;\n      }\n\n      if (arg[0] === \"-\") {\n        var parsedArg = program[arg.slice(2)];\n        if (parsedArg && parsedArg !== true) {\n          ignoreNext = true;\n        }\n      } else {\n        i = i2;\n        return true;\n      }\n    });\n    args = args.slice(i);\n\n    var filename = args[0];\n    if (!(0, _pathIsAbsolute2.default)(filename)) args[0] = _path2.default.join(process.cwd(), filename);\n\n    process.argv = [\"node\"].concat(args);\n    process.execArgv.unshift(__filename);\n\n    _module3.default.runMain();\n  } else {\n    replStart();\n  }\n}\n\nfunction replStart() {\n  _repl2.default.start({\n    prompt: \"> \",\n    input: process.stdin,\n    output: process.stdout,\n    eval: replEval,\n    useGlobal: true\n  });\n}\n\nfunction replEval(code, context, filename, callback) {\n  var err = void 0;\n  var result = void 0;\n\n  try {\n    if (code[0] === \"(\" && code[code.length - 1] === \")\") {\n      code = code.slice(1, -1);\n    }\n\n    result = _eval(code, filename);\n  } catch (e) {\n    err = e;\n  }\n\n  callback(err, result);\n}"]}