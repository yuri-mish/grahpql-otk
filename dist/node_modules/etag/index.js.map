{"version":3,"sources":["../../../node_modules/etag/index.js"],"names":["module","exports","etag","crypto","require","Stats","toString","Object","prototype","entitytag","entity","length","hash","createHash","update","digest","substring","len","Buffer","byteLength","options","TypeError","isStats","isstats","weak","isBuffer","tag","stattag","obj","call","ctime","mtime","ino","size","stat","getTime"],"mappings":"AAAA;;;;;;AAMA;;AAEA;;;;;AAKAA,OAAOC,OAAP,GAAiBC,IAAjB;;AAEA;;;;;AAKA,IAAIC,SAASC,QAAQ,QAAR,CAAb;AACA,IAAIC,QAAQD,QAAQ,IAAR,EAAcC,KAA1B;;AAEA;;;;;AAKA,IAAIC,WAAWC,OAAOC,SAAP,CAAiBF,QAAhC;;AAEA;;;;;;;;AAQA,SAASG,SAAT,CAAoBC,MAApB,EAA4B;AAC1B,MAAIA,OAAOC,MAAP,KAAkB,CAAtB,EAAyB;AACvB;AACA,WAAO,iCAAP;AACD;;AAED;AACA,MAAIC,OAAOT,OACRU,UADQ,CACG,MADH,EAERC,MAFQ,CAEDJ,MAFC,EAEO,MAFP,EAGRK,MAHQ,CAGD,QAHC,EAIRC,SAJQ,CAIE,CAJF,EAIK,EAJL,CAAX;;AAMA;AACA,MAAIC,MAAM,OAAOP,MAAP,KAAkB,QAAlB,GACNQ,OAAOC,UAAP,CAAkBT,MAAlB,EAA0B,MAA1B,CADM,GAENA,OAAOC,MAFX;;AAIA,SAAO,MAAMM,IAAIX,QAAJ,CAAa,EAAb,CAAN,GAAyB,GAAzB,GAA+BM,IAA/B,GAAsC,GAA7C;AACD;;AAED;;;;;;;;;;AAUA,SAASV,IAAT,CAAeQ,MAAf,EAAuBU,OAAvB,EAAgC;AAC9B,MAAIV,UAAU,IAAd,EAAoB;AAClB,UAAM,IAAIW,SAAJ,CAAc,6BAAd,CAAN;AACD;;AAED;AACA,MAAIC,UAAUC,QAAQb,MAAR,CAAd;AACA,MAAIc,OAAOJ,WAAW,OAAOA,QAAQI,IAAf,KAAwB,SAAnC,GACPJ,QAAQI,IADD,GAEPF,OAFJ;;AAIA;AACA,MAAI,CAACA,OAAD,IAAY,OAAOZ,MAAP,KAAkB,QAA9B,IAA0C,CAACQ,OAAOO,QAAP,CAAgBf,MAAhB,CAA/C,EAAwE;AACtE,UAAM,IAAIW,SAAJ,CAAc,qDAAd,CAAN;AACD;;AAED;AACA,MAAIK,MAAMJ,UACNK,QAAQjB,MAAR,CADM,GAEND,UAAUC,MAAV,CAFJ;;AAIA,SAAOc,OACH,OAAOE,GADJ,GAEHA,GAFJ;AAGD;;AAED;;;;;;;;AAQA,SAASH,OAAT,CAAkBK,GAAlB,EAAuB;AACrB;AACA,MAAI,OAAOvB,KAAP,KAAiB,UAAjB,IAA+BuB,eAAevB,KAAlD,EAAyD;AACvD,WAAO,IAAP;AACD;;AAED;AACA,SAAOuB,OAAO,OAAOA,GAAP,KAAe,QAAtB,IACL,WAAWA,GADN,IACatB,SAASuB,IAAT,CAAcD,IAAIE,KAAlB,MAA6B,eAD1C,IAEL,WAAWF,GAFN,IAEatB,SAASuB,IAAT,CAAcD,IAAIG,KAAlB,MAA6B,eAF1C,IAGL,SAASH,GAHJ,IAGW,OAAOA,IAAII,GAAX,KAAmB,QAH9B,IAIL,UAAUJ,GAJL,IAIY,OAAOA,IAAIK,IAAX,KAAoB,QAJvC;AAKD;;AAED;;;;;;;;AAQA,SAASN,OAAT,CAAkBO,IAAlB,EAAwB;AACtB,MAAIH,QAAQG,KAAKH,KAAL,CAAWI,OAAX,GAAqB7B,QAArB,CAA8B,EAA9B,CAAZ;AACA,MAAI2B,OAAOC,KAAKD,IAAL,CAAU3B,QAAV,CAAmB,EAAnB,CAAX;;AAEA,SAAO,MAAM2B,IAAN,GAAa,GAAb,GAAmBF,KAAnB,GAA2B,GAAlC;AACD","file":"index.js","sourcesContent":["/*!\n * etag\n * Copyright(c) 2014-2016 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = etag\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar crypto = require('crypto')\nvar Stats = require('fs').Stats\n\n/**\n * Module variables.\n * @private\n */\n\nvar toString = Object.prototype.toString\n\n/**\n * Generate an entity tag.\n *\n * @param {Buffer|string} entity\n * @return {string}\n * @private\n */\n\nfunction entitytag (entity) {\n  if (entity.length === 0) {\n    // fast-path empty\n    return '\"0-2jmj7l5rSw0yVb/vlWAYkK/YBwk\"'\n  }\n\n  // compute hash of entity\n  var hash = crypto\n    .createHash('sha1')\n    .update(entity, 'utf8')\n    .digest('base64')\n    .substring(0, 27)\n\n  // compute length of entity\n  var len = typeof entity === 'string'\n    ? Buffer.byteLength(entity, 'utf8')\n    : entity.length\n\n  return '\"' + len.toString(16) + '-' + hash + '\"'\n}\n\n/**\n * Create a simple ETag.\n *\n * @param {string|Buffer|Stats} entity\n * @param {object} [options]\n * @param {boolean} [options.weak]\n * @return {String}\n * @public\n */\n\nfunction etag (entity, options) {\n  if (entity == null) {\n    throw new TypeError('argument entity is required')\n  }\n\n  // support fs.Stats object\n  var isStats = isstats(entity)\n  var weak = options && typeof options.weak === 'boolean'\n    ? options.weak\n    : isStats\n\n  // validate argument\n  if (!isStats && typeof entity !== 'string' && !Buffer.isBuffer(entity)) {\n    throw new TypeError('argument entity must be string, Buffer, or fs.Stats')\n  }\n\n  // generate entity tag\n  var tag = isStats\n    ? stattag(entity)\n    : entitytag(entity)\n\n  return weak\n    ? 'W/' + tag\n    : tag\n}\n\n/**\n * Determine if object is a Stats object.\n *\n * @param {object} obj\n * @return {boolean}\n * @api private\n */\n\nfunction isstats (obj) {\n  // genuine fs.Stats\n  if (typeof Stats === 'function' && obj instanceof Stats) {\n    return true\n  }\n\n  // quack quack\n  return obj && typeof obj === 'object' &&\n    'ctime' in obj && toString.call(obj.ctime) === '[object Date]' &&\n    'mtime' in obj && toString.call(obj.mtime) === '[object Date]' &&\n    'ino' in obj && typeof obj.ino === 'number' &&\n    'size' in obj && typeof obj.size === 'number'\n}\n\n/**\n * Generate a tag for a stat.\n *\n * @param {object} stat\n * @return {string}\n * @private\n */\n\nfunction stattag (stat) {\n  var mtime = stat.mtime.getTime().toString(16)\n  var size = stat.size.toString(16)\n\n  return '\"' + size + '-' + mtime + '\"'\n}\n"]}