{"version":3,"sources":["../../../../../../../node_modules/babel-core/lib/transformation/file/options/option-manager.js"],"names":["exports","__esModule","_objectWithoutProperties2","require","_objectWithoutProperties3","_interopRequireDefault","_stringify","_stringify2","_assign","_assign2","_getIterator2","_getIterator3","_typeof2","_typeof3","_classCallCheck2","_classCallCheck3","_node","context","_interopRequireWildcard","_plugin2","_plugin3","_babelMessages","messages","_index","_resolvePlugin","_resolvePlugin2","_resolvePreset","_resolvePreset2","_cloneDeepWith","_cloneDeepWith2","_clone","_clone2","_merge","_merge2","_config2","_config3","_removed","_removed2","_buildConfigChain","_buildConfigChain2","_path","_path2","obj","newObj","key","Object","prototype","hasOwnProperty","call","default","OptionManager","log","resolvedConfigs","options","createBareOptions","memoisePluginContainer","fn","loc","i","alias","_iterator","memoisedPlugins","_isArray","Array","isArray","_i","_ref","length","next","done","value","cache","container","plugin","_plugin","push","TypeError","get","opts","_key","opt","normalisePlugin","init","normalisePlugins","dirname","plugins","map","val","pluginLoc","ReferenceError","mergeOptions","_ref2","_this","rawOpts","extendingOpts","extending","error","process","cwd","_key2","option","message","unknownOptErr","presetConfigErr","normaliseOptions","presets","passPerPreset","resolvePresets","preset","presetLoc","mergePresets","_this2","presetOpts","onResolve","Error","slice","_val","_val2","rest","buildPreset","undefined","e","_key3","optional","arguments","_iterator2","_isArray2","_i2","_ref3","_config","module"],"mappings":"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","file":"option-manager.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _objectWithoutProperties2 = require(\"babel-runtime/helpers/objectWithoutProperties\");\n\nvar _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);\n\nvar _stringify = require(\"babel-runtime/core-js/json/stringify\");\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _assign = require(\"babel-runtime/core-js/object/assign\");\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _getIterator2 = require(\"babel-runtime/core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nvar _typeof2 = require(\"babel-runtime/helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _node = require(\"../../../api/node\");\n\nvar context = _interopRequireWildcard(_node);\n\nvar _plugin2 = require(\"../../plugin\");\n\nvar _plugin3 = _interopRequireDefault(_plugin2);\n\nvar _babelMessages = require(\"babel-messages\");\n\nvar messages = _interopRequireWildcard(_babelMessages);\n\nvar _index = require(\"./index\");\n\nvar _resolvePlugin = require(\"../../../helpers/resolve-plugin\");\n\nvar _resolvePlugin2 = _interopRequireDefault(_resolvePlugin);\n\nvar _resolvePreset = require(\"../../../helpers/resolve-preset\");\n\nvar _resolvePreset2 = _interopRequireDefault(_resolvePreset);\n\nvar _cloneDeepWith = require(\"lodash/cloneDeepWith\");\n\nvar _cloneDeepWith2 = _interopRequireDefault(_cloneDeepWith);\n\nvar _clone = require(\"lodash/clone\");\n\nvar _clone2 = _interopRequireDefault(_clone);\n\nvar _merge = require(\"../../../helpers/merge\");\n\nvar _merge2 = _interopRequireDefault(_merge);\n\nvar _config2 = require(\"./config\");\n\nvar _config3 = _interopRequireDefault(_config2);\n\nvar _removed = require(\"./removed\");\n\nvar _removed2 = _interopRequireDefault(_removed);\n\nvar _buildConfigChain = require(\"./build-config-chain\");\n\nvar _buildConfigChain2 = _interopRequireDefault(_buildConfigChain);\n\nvar _path = require(\"path\");\n\nvar _path2 = _interopRequireDefault(_path);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar OptionManager = function () {\n  function OptionManager(log) {\n    (0, _classCallCheck3.default)(this, OptionManager);\n\n    this.resolvedConfigs = [];\n    this.options = OptionManager.createBareOptions();\n    this.log = log;\n  }\n\n  OptionManager.memoisePluginContainer = function memoisePluginContainer(fn, loc, i, alias) {\n    for (var _iterator = OptionManager.memoisedPlugins, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : (0, _getIterator3.default)(_iterator);;) {\n      var _ref;\n\n      if (_isArray) {\n        if (_i >= _iterator.length) break;\n        _ref = _iterator[_i++];\n      } else {\n        _i = _iterator.next();\n        if (_i.done) break;\n        _ref = _i.value;\n      }\n\n      var cache = _ref;\n\n      if (cache.container === fn) return cache.plugin;\n    }\n\n    var obj = void 0;\n\n    if (typeof fn === \"function\") {\n      obj = fn(context);\n    } else {\n      obj = fn;\n    }\n\n    if ((typeof obj === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(obj)) === \"object\") {\n      var _plugin = new _plugin3.default(obj, alias);\n      OptionManager.memoisedPlugins.push({\n        container: fn,\n        plugin: _plugin\n      });\n      return _plugin;\n    } else {\n      throw new TypeError(messages.get(\"pluginNotObject\", loc, i, typeof obj === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(obj)) + loc + i);\n    }\n  };\n\n  OptionManager.createBareOptions = function createBareOptions() {\n    var opts = {};\n\n    for (var _key in _config3.default) {\n      var opt = _config3.default[_key];\n      opts[_key] = (0, _clone2.default)(opt.default);\n    }\n\n    return opts;\n  };\n\n  OptionManager.normalisePlugin = function normalisePlugin(plugin, loc, i, alias) {\n    plugin = plugin.__esModule ? plugin.default : plugin;\n\n    if (!(plugin instanceof _plugin3.default)) {\n      if (typeof plugin === \"function\" || (typeof plugin === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(plugin)) === \"object\") {\n        plugin = OptionManager.memoisePluginContainer(plugin, loc, i, alias);\n      } else {\n        throw new TypeError(messages.get(\"pluginNotFunction\", loc, i, typeof plugin === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(plugin)));\n      }\n    }\n\n    plugin.init(loc, i);\n\n    return plugin;\n  };\n\n  OptionManager.normalisePlugins = function normalisePlugins(loc, dirname, plugins) {\n    return plugins.map(function (val, i) {\n      var plugin = void 0,\n          options = void 0;\n\n      if (!val) {\n        throw new TypeError(\"Falsy value found in plugins\");\n      }\n\n      if (Array.isArray(val)) {\n        plugin = val[0];\n        options = val[1];\n      } else {\n        plugin = val;\n      }\n\n      var alias = typeof plugin === \"string\" ? plugin : loc + \"$\" + i;\n\n      if (typeof plugin === \"string\") {\n        var pluginLoc = (0, _resolvePlugin2.default)(plugin, dirname);\n        if (pluginLoc) {\n          plugin = require(pluginLoc);\n        } else {\n          throw new ReferenceError(messages.get(\"pluginUnknown\", plugin, loc, i, dirname));\n        }\n      }\n\n      plugin = OptionManager.normalisePlugin(plugin, loc, i, alias);\n\n      return [plugin, options];\n    });\n  };\n\n  OptionManager.prototype.mergeOptions = function mergeOptions(_ref2) {\n    var _this = this;\n\n    var rawOpts = _ref2.options,\n        extendingOpts = _ref2.extending,\n        alias = _ref2.alias,\n        loc = _ref2.loc,\n        dirname = _ref2.dirname;\n\n    alias = alias || \"foreign\";\n    if (!rawOpts) return;\n\n    if ((typeof rawOpts === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(rawOpts)) !== \"object\" || Array.isArray(rawOpts)) {\n      this.log.error(\"Invalid options type for \" + alias, TypeError);\n    }\n\n    var opts = (0, _cloneDeepWith2.default)(rawOpts, function (val) {\n      if (val instanceof _plugin3.default) {\n        return val;\n      }\n    });\n\n    dirname = dirname || process.cwd();\n    loc = loc || alias;\n\n    for (var _key2 in opts) {\n      var option = _config3.default[_key2];\n\n      if (!option && this.log) {\n        if (_removed2.default[_key2]) {\n          this.log.error(\"Using removed Babel 5 option: \" + alias + \".\" + _key2 + \" - \" + _removed2.default[_key2].message, ReferenceError);\n        } else {\n          var unknownOptErr = \"Unknown option: \" + alias + \".\" + _key2 + \". Check out http://babeljs.io/docs/usage/options/ for more information about options.\";\n          var presetConfigErr = \"A common cause of this error is the presence of a configuration options object without the corresponding preset name. Example:\\n\\nInvalid:\\n  `{ presets: [{option: value}] }`\\nValid:\\n  `{ presets: [['presetName', {option: value}]] }`\\n\\nFor more detailed information on preset configuration, please see https://babeljs.io/docs/en/plugins#pluginpresets-options.\";\n\n\n          this.log.error(unknownOptErr + \"\\n\\n\" + presetConfigErr, ReferenceError);\n        }\n      }\n    }\n\n    (0, _index.normaliseOptions)(opts);\n\n    if (opts.plugins) {\n      opts.plugins = OptionManager.normalisePlugins(loc, dirname, opts.plugins);\n    }\n\n    if (opts.presets) {\n      if (opts.passPerPreset) {\n        opts.presets = this.resolvePresets(opts.presets, dirname, function (preset, presetLoc) {\n          _this.mergeOptions({\n            options: preset,\n            extending: preset,\n            alias: presetLoc,\n            loc: presetLoc,\n            dirname: dirname\n          });\n        });\n      } else {\n        this.mergePresets(opts.presets, dirname);\n        delete opts.presets;\n      }\n    }\n\n    if (rawOpts === extendingOpts) {\n      (0, _assign2.default)(extendingOpts, opts);\n    } else {\n      (0, _merge2.default)(extendingOpts || this.options, opts);\n    }\n  };\n\n  OptionManager.prototype.mergePresets = function mergePresets(presets, dirname) {\n    var _this2 = this;\n\n    this.resolvePresets(presets, dirname, function (presetOpts, presetLoc) {\n      _this2.mergeOptions({\n        options: presetOpts,\n        alias: presetLoc,\n        loc: presetLoc,\n        dirname: _path2.default.dirname(presetLoc || \"\")\n      });\n    });\n  };\n\n  OptionManager.prototype.resolvePresets = function resolvePresets(presets, dirname, onResolve) {\n    return presets.map(function (val) {\n      var options = void 0;\n      if (Array.isArray(val)) {\n        if (val.length > 2) {\n          throw new Error(\"Unexpected extra options \" + (0, _stringify2.default)(val.slice(2)) + \" passed to preset.\");\n        }\n\n        var _val = val;\n        val = _val[0];\n        options = _val[1];\n      }\n\n      var presetLoc = void 0;\n      try {\n        if (typeof val === \"string\") {\n          presetLoc = (0, _resolvePreset2.default)(val, dirname);\n\n          if (!presetLoc) {\n            throw new Error(\"Couldn't find preset \" + (0, _stringify2.default)(val) + \" relative to directory \" + (0, _stringify2.default)(dirname));\n          }\n\n          val = require(presetLoc);\n        }\n\n        if ((typeof val === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(val)) === \"object\" && val.__esModule) {\n          if (val.default) {\n            val = val.default;\n          } else {\n            var _val2 = val,\n                __esModule = _val2.__esModule,\n                rest = (0, _objectWithoutProperties3.default)(_val2, [\"__esModule\"]);\n\n            val = rest;\n          }\n        }\n\n        if ((typeof val === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(val)) === \"object\" && val.buildPreset) val = val.buildPreset;\n\n        if (typeof val !== \"function\" && options !== undefined) {\n          throw new Error(\"Options \" + (0, _stringify2.default)(options) + \" passed to \" + (presetLoc || \"a preset\") + \" which does not accept options.\");\n        }\n\n        if (typeof val === \"function\") val = val(context, options, { dirname: dirname });\n\n        if ((typeof val === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(val)) !== \"object\") {\n          throw new Error(\"Unsupported preset format: \" + val + \".\");\n        }\n\n        onResolve && onResolve(val, presetLoc);\n      } catch (e) {\n        if (presetLoc) {\n          e.message += \" (While processing preset: \" + (0, _stringify2.default)(presetLoc) + \")\";\n        }\n        throw e;\n      }\n      return val;\n    });\n  };\n\n  OptionManager.prototype.normaliseOptions = function normaliseOptions() {\n    var opts = this.options;\n\n    for (var _key3 in _config3.default) {\n      var option = _config3.default[_key3];\n      var val = opts[_key3];\n\n      if (!val && option.optional) continue;\n\n      if (option.alias) {\n        opts[option.alias] = opts[option.alias] || val;\n      } else {\n        opts[_key3] = val;\n      }\n    }\n  };\n\n  OptionManager.prototype.init = function init() {\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    for (var _iterator2 = (0, _buildConfigChain2.default)(opts, this.log), _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : (0, _getIterator3.default)(_iterator2);;) {\n      var _ref3;\n\n      if (_isArray2) {\n        if (_i2 >= _iterator2.length) break;\n        _ref3 = _iterator2[_i2++];\n      } else {\n        _i2 = _iterator2.next();\n        if (_i2.done) break;\n        _ref3 = _i2.value;\n      }\n\n      var _config = _ref3;\n\n      this.mergeOptions(_config);\n    }\n\n    this.normaliseOptions(opts);\n\n    return this.options;\n  };\n\n  return OptionManager;\n}();\n\nexports.default = OptionManager;\n\n\nOptionManager.memoisedPlugins = [];\nmodule.exports = exports[\"default\"];"]}