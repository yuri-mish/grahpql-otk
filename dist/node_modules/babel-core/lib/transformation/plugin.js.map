{"version":3,"sources":["../../../../../node_modules/babel-core/lib/transformation/plugin.js"],"names":["exports","__esModule","_getIterator2","require","_getIterator3","_interopRequireDefault","_classCallCheck2","_classCallCheck3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_optionManager","_optionManager2","_babelMessages","messages","_interopRequireWildcard","_store","_store2","_babelTraverse","_babelTraverse2","_assign","_assign2","_clone","_clone2","obj","newObj","key","Object","prototype","hasOwnProperty","call","default","GLOBAL_VISITOR_PROPS","Plugin","_Store","plugin","_this","initialized","raw","take","manipulateOptions","post","pre","visitor","normaliseVisitor","val","chain","target","fns","_len","arguments","length","args","Array","_key","_iterator","_isArray","isArray","_i","_ref","next","done","value","fn","ret","apply","maybeInherit","loc","inherits","normalisePlugin","visitors","merge","init","i","Error","get","_iterator2","_isArray2","_i2","_ref2","explode","module"],"mappings":"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","file":"plugin.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _getIterator2 = require(\"babel-runtime/core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _optionManager = require(\"./file/options/option-manager\");\n\nvar _optionManager2 = _interopRequireDefault(_optionManager);\n\nvar _babelMessages = require(\"babel-messages\");\n\nvar messages = _interopRequireWildcard(_babelMessages);\n\nvar _store = require(\"../store\");\n\nvar _store2 = _interopRequireDefault(_store);\n\nvar _babelTraverse = require(\"babel-traverse\");\n\nvar _babelTraverse2 = _interopRequireDefault(_babelTraverse);\n\nvar _assign = require(\"lodash/assign\");\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _clone = require(\"lodash/clone\");\n\nvar _clone2 = _interopRequireDefault(_clone);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar GLOBAL_VISITOR_PROPS = [\"enter\", \"exit\"];\n\nvar Plugin = function (_Store) {\n  (0, _inherits3.default)(Plugin, _Store);\n\n  function Plugin(plugin, key) {\n    (0, _classCallCheck3.default)(this, Plugin);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, _Store.call(this));\n\n    _this.initialized = false;\n    _this.raw = (0, _assign2.default)({}, plugin);\n    _this.key = _this.take(\"name\") || key;\n\n    _this.manipulateOptions = _this.take(\"manipulateOptions\");\n    _this.post = _this.take(\"post\");\n    _this.pre = _this.take(\"pre\");\n    _this.visitor = _this.normaliseVisitor((0, _clone2.default)(_this.take(\"visitor\")) || {});\n    return _this;\n  }\n\n  Plugin.prototype.take = function take(key) {\n    var val = this.raw[key];\n    delete this.raw[key];\n    return val;\n  };\n\n  Plugin.prototype.chain = function chain(target, key) {\n    if (!target[key]) return this[key];\n    if (!this[key]) return target[key];\n\n    var fns = [target[key], this[key]];\n\n    return function () {\n      var val = void 0;\n\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      for (var _iterator = fns, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : (0, _getIterator3.default)(_iterator);;) {\n        var _ref;\n\n        if (_isArray) {\n          if (_i >= _iterator.length) break;\n          _ref = _iterator[_i++];\n        } else {\n          _i = _iterator.next();\n          if (_i.done) break;\n          _ref = _i.value;\n        }\n\n        var fn = _ref;\n\n        if (fn) {\n          var ret = fn.apply(this, args);\n          if (ret != null) val = ret;\n        }\n      }\n      return val;\n    };\n  };\n\n  Plugin.prototype.maybeInherit = function maybeInherit(loc) {\n    var inherits = this.take(\"inherits\");\n    if (!inherits) return;\n\n    inherits = _optionManager2.default.normalisePlugin(inherits, loc, \"inherits\");\n\n    this.manipulateOptions = this.chain(inherits, \"manipulateOptions\");\n    this.post = this.chain(inherits, \"post\");\n    this.pre = this.chain(inherits, \"pre\");\n    this.visitor = _babelTraverse2.default.visitors.merge([inherits.visitor, this.visitor]);\n  };\n\n  Plugin.prototype.init = function init(loc, i) {\n    if (this.initialized) return;\n    this.initialized = true;\n\n    this.maybeInherit(loc);\n\n    for (var key in this.raw) {\n      throw new Error(messages.get(\"pluginInvalidProperty\", loc, i, key));\n    }\n  };\n\n  Plugin.prototype.normaliseVisitor = function normaliseVisitor(visitor) {\n    for (var _iterator2 = GLOBAL_VISITOR_PROPS, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : (0, _getIterator3.default)(_iterator2);;) {\n      var _ref2;\n\n      if (_isArray2) {\n        if (_i2 >= _iterator2.length) break;\n        _ref2 = _iterator2[_i2++];\n      } else {\n        _i2 = _iterator2.next();\n        if (_i2.done) break;\n        _ref2 = _i2.value;\n      }\n\n      var key = _ref2;\n\n      if (visitor[key]) {\n        throw new Error(\"Plugins aren't allowed to specify catch-all enter/exit handlers. \" + \"Please target individual nodes.\");\n      }\n    }\n\n    _babelTraverse2.default.explode(visitor);\n    return visitor;\n  };\n\n  return Plugin;\n}(_store2.default);\n\nexports.default = Plugin;\nmodule.exports = exports[\"default\"];"]}