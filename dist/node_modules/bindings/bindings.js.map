{"version":3,"sources":["../../../node_modules/bindings/bindings.js"],"names":["fs","require","path","fileURLToPath","join","dirname","exists","accessSync","e","existsSync","defaults","arrow","process","env","NODE_BINDINGS_ARROW","compiled","NODE_BINDINGS_COMPILED_DIR","platform","arch","nodePreGyp","versions","modules","version","node","bindings","try","opts","Object","keys","map","i","module_root","exports","getRoot","getFileName","extname","requireFunc","__webpack_require__","__non_webpack_require__","tries","l","length","n","b","err","apply","p","push","resolve","code","test","message","Error","a","module","calling_file","origPST","prepareStackTrace","origSTL","stackTraceLimit","dummy","fileName","st","__filename","captureStackTrace","stack","fileSchema","indexOf","file","dir","prev","cwd"],"mappings":"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","file":"bindings.js","sourcesContent":["/**\n * Module dependencies.\n */\n\nvar fs = require('fs'),\n  path = require('path'),\n  fileURLToPath = require('file-uri-to-path'),\n  join = path.join,\n  dirname = path.dirname,\n  exists =\n    (fs.accessSync &&\n      function(path) {\n        try {\n          fs.accessSync(path);\n        } catch (e) {\n          return false;\n        }\n        return true;\n      }) ||\n    fs.existsSync ||\n    path.existsSync,\n  defaults = {\n    arrow: process.env.NODE_BINDINGS_ARROW || ' â†’ ',\n    compiled: process.env.NODE_BINDINGS_COMPILED_DIR || 'compiled',\n    platform: process.platform,\n    arch: process.arch,\n    nodePreGyp:\n      'node-v' +\n      process.versions.modules +\n      '-' +\n      process.platform +\n      '-' +\n      process.arch,\n    version: process.versions.node,\n    bindings: 'bindings.node',\n    try: [\n      // node-gyp's linked version in the \"build\" dir\n      ['module_root', 'build', 'bindings'],\n      // node-waf and gyp_addon (a.k.a node-gyp)\n      ['module_root', 'build', 'Debug', 'bindings'],\n      ['module_root', 'build', 'Release', 'bindings'],\n      // Debug files, for development (legacy behavior, remove for node v0.9)\n      ['module_root', 'out', 'Debug', 'bindings'],\n      ['module_root', 'Debug', 'bindings'],\n      // Release files, but manually compiled (legacy behavior, remove for node v0.9)\n      ['module_root', 'out', 'Release', 'bindings'],\n      ['module_root', 'Release', 'bindings'],\n      // Legacy from node-waf, node <= 0.4.x\n      ['module_root', 'build', 'default', 'bindings'],\n      // Production \"Release\" buildtype binary (meh...)\n      ['module_root', 'compiled', 'version', 'platform', 'arch', 'bindings'],\n      // node-qbs builds\n      ['module_root', 'addon-build', 'release', 'install-root', 'bindings'],\n      ['module_root', 'addon-build', 'debug', 'install-root', 'bindings'],\n      ['module_root', 'addon-build', 'default', 'install-root', 'bindings'],\n      // node-pre-gyp path ./lib/binding/{node_abi}-{platform}-{arch}\n      ['module_root', 'lib', 'binding', 'nodePreGyp', 'bindings']\n    ]\n  };\n\n/**\n * The main `bindings()` function loads the compiled bindings for a given module.\n * It uses V8's Error API to determine the parent filename that this function is\n * being invoked from, which is then used to find the root directory.\n */\n\nfunction bindings(opts) {\n  // Argument surgery\n  if (typeof opts == 'string') {\n    opts = { bindings: opts };\n  } else if (!opts) {\n    opts = {};\n  }\n\n  // maps `defaults` onto `opts` object\n  Object.keys(defaults).map(function(i) {\n    if (!(i in opts)) opts[i] = defaults[i];\n  });\n\n  // Get the module root\n  if (!opts.module_root) {\n    opts.module_root = exports.getRoot(exports.getFileName());\n  }\n\n  // Ensure the given bindings name ends with .node\n  if (path.extname(opts.bindings) != '.node') {\n    opts.bindings += '.node';\n  }\n\n  // https://github.com/webpack/webpack/issues/4175#issuecomment-342931035\n  var requireFunc =\n    typeof __webpack_require__ === 'function'\n      ? __non_webpack_require__\n      : require;\n\n  var tries = [],\n    i = 0,\n    l = opts.try.length,\n    n,\n    b,\n    err;\n\n  for (; i < l; i++) {\n    n = join.apply(\n      null,\n      opts.try[i].map(function(p) {\n        return opts[p] || p;\n      })\n    );\n    tries.push(n);\n    try {\n      b = opts.path ? requireFunc.resolve(n) : requireFunc(n);\n      if (!opts.path) {\n        b.path = n;\n      }\n      return b;\n    } catch (e) {\n      if (e.code !== 'MODULE_NOT_FOUND' &&\n          e.code !== 'QUALIFIED_PATH_RESOLUTION_FAILED' &&\n          !/not find/i.test(e.message)) {\n        throw e;\n      }\n    }\n  }\n\n  err = new Error(\n    'Could not locate the bindings file. Tried:\\n' +\n      tries\n        .map(function(a) {\n          return opts.arrow + a;\n        })\n        .join('\\n')\n  );\n  err.tries = tries;\n  throw err;\n}\nmodule.exports = exports = bindings;\n\n/**\n * Gets the filename of the JavaScript file that invokes this function.\n * Used to help find the root directory of a module.\n * Optionally accepts an filename argument to skip when searching for the invoking filename\n */\n\nexports.getFileName = function getFileName(calling_file) {\n  var origPST = Error.prepareStackTrace,\n    origSTL = Error.stackTraceLimit,\n    dummy = {},\n    fileName;\n\n  Error.stackTraceLimit = 10;\n\n  Error.prepareStackTrace = function(e, st) {\n    for (var i = 0, l = st.length; i < l; i++) {\n      fileName = st[i].getFileName();\n      if (fileName !== __filename) {\n        if (calling_file) {\n          if (fileName !== calling_file) {\n            return;\n          }\n        } else {\n          return;\n        }\n      }\n    }\n  };\n\n  // run the 'prepareStackTrace' function above\n  Error.captureStackTrace(dummy);\n  dummy.stack;\n\n  // cleanup\n  Error.prepareStackTrace = origPST;\n  Error.stackTraceLimit = origSTL;\n\n  // handle filename that starts with \"file://\"\n  var fileSchema = 'file://';\n  if (fileName.indexOf(fileSchema) === 0) {\n    fileName = fileURLToPath(fileName);\n  }\n\n  return fileName;\n};\n\n/**\n * Gets the root directory of a module, given an arbitrary filename\n * somewhere in the module tree. The \"root directory\" is the directory\n * containing the `package.json` file.\n *\n *   In:  /home/nate/node-native-module/lib/index.js\n *   Out: /home/nate/node-native-module\n */\n\nexports.getRoot = function getRoot(file) {\n  var dir = dirname(file),\n    prev;\n  while (true) {\n    if (dir === '.') {\n      // Avoids an infinite loop in rare cases, like the REPL\n      dir = process.cwd();\n    }\n    if (\n      exists(join(dir, 'package.json')) ||\n      exists(join(dir, 'node_modules'))\n    ) {\n      // Found the 'package.json' file or 'node_modules' dir; we're done\n      return dir;\n    }\n    if (prev === dir) {\n      // Got to the top\n      throw new Error(\n        'Could not find module root given file: \"' +\n          file +\n          '\". Do you have a `package.json` file? '\n      );\n    }\n    // Try the parent dir next\n    prev = dir;\n    dir = join(dir, '..');\n  }\n};\n"]}