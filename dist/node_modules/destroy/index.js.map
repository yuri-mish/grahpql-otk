{"version":3,"sources":["../../../node_modules/destroy/index.js"],"names":["ReadStream","require","Stream","module","exports","destroy","stream","destroyReadStream","close","on","onOpenClose","fd"],"mappings":"AAAA;;;;;;AAMA;;AAEA;;;;;AAKA,IAAIA,aAAaC,QAAQ,IAAR,EAAcD,UAA/B;AACA,IAAIE,SAASD,QAAQ,QAAR,CAAb;;AAEA;;;;;AAKAE,OAAOC,OAAP,GAAiBC,OAAjB;;AAEA;;;;;;;AAOA,SAASA,OAAT,CAAiBC,MAAjB,EAAyB;AACvB,MAAIA,kBAAkBN,UAAtB,EAAkC;AAChC,WAAOO,kBAAkBD,MAAlB,CAAP;AACD;;AAED,MAAI,EAAEA,kBAAkBJ,MAApB,CAAJ,EAAiC;AAC/B,WAAOI,MAAP;AACD;;AAED,MAAI,OAAOA,OAAOD,OAAd,KAA0B,UAA9B,EAA0C;AACxCC,WAAOD,OAAP;AACD;;AAED,SAAOC,MAAP;AACD;;AAED;;;;;;;AAOA,SAASC,iBAAT,CAA2BD,MAA3B,EAAmC;AACjCA,SAAOD,OAAP;;AAEA,MAAI,OAAOC,OAAOE,KAAd,KAAwB,UAA5B,EAAwC;AACtC;AACAF,WAAOG,EAAP,CAAU,MAAV,EAAkBC,WAAlB;AACD;;AAED,SAAOJ,MAAP;AACD;;AAED;;;;;AAKA,SAASI,WAAT,GAAuB;AACrB,MAAI,OAAO,KAAKC,EAAZ,KAAmB,QAAvB,EAAiC;AAC/B;AACA,SAAKH,KAAL;AACD;AACF","file":"index.js","sourcesContent":["/*!\n * destroy\n * Copyright(c) 2014 Jonathan Ong\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar ReadStream = require('fs').ReadStream\nvar Stream = require('stream')\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = destroy\n\n/**\n * Destroy a stream.\n *\n * @param {object} stream\n * @public\n */\n\nfunction destroy(stream) {\n  if (stream instanceof ReadStream) {\n    return destroyReadStream(stream)\n  }\n\n  if (!(stream instanceof Stream)) {\n    return stream\n  }\n\n  if (typeof stream.destroy === 'function') {\n    stream.destroy()\n  }\n\n  return stream\n}\n\n/**\n * Destroy a ReadStream.\n *\n * @param {object} stream\n * @private\n */\n\nfunction destroyReadStream(stream) {\n  stream.destroy()\n\n  if (typeof stream.close === 'function') {\n    // node.js core bug work-around\n    stream.on('open', onOpenClose)\n  }\n\n  return stream\n}\n\n/**\n * On open handler to close stream.\n * @private\n */\n\nfunction onOpenClose() {\n  if (typeof this.fd === 'number') {\n    // actually close down the fd\n    this.close()\n  }\n}\n"]}